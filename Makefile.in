#########################################################################
# $Id$ 
# 
# Makefile for jpeginfo 
#
Version = 1.4
PKGNAME = jpeginfo

SHELL = /bin/sh

DEFS = @DEFS@

srcdir = @srcdir@
VPATH = @srcdir@

prefix = @prefix@
exec_prefix = @exec_prefix@

# Where to install the executables.
bindir = $(exec_prefix)/bin

# Where to put libraries
libdir = $(prefix)/lib

# Where to put the Info files
infodir = $(prefix)/info

# Where to put the manual pages.
mandir = $(prefix)/man


USER	= root
GROUP	= root


INCLUDES = -I. @includeopt@

CC     = @CC@
CFLAGS = @CFLAGS@
LDFLAGS= @LDFLAGS@
LIBS   = @LIBS@
STRIP  = @STRIP@


INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@

@SET_MAKE@

# should be no reason to modify lines below this
#########################################################################

DIRNAME = $(shell basename `pwd`) 
DISTNAME  = $(PKGNAME)-$(Version)

OBJS = $(PKGNAME).o misc.o md5.o

$(PKGNAME):	$(OBJS) 
	$(CC) $(CFLAGS) -o $(PKGNAME) $(OBJS) $(LIBS) 

all:	$(PKGNAME) 

strip:
	for i in $(PKGNAME) ; do [ -x $i ] && $(STRIP) $$i ; done

clean:
	rm -f *~ *.o core a.out make.log $(PKGNAME) $(OBJS)

dist:	clean
	(cd .. ; tar cvzf $(DISTNAME).tar.gz $(DIRNAME))

backup:	dist

zip:	clean	
	(cd .. ; zip -r9 $(DISTNAME).zip $(DIRNAME))

install: all  install.man
	install -m 755 -o $(USER) -g $(GROUP) $(PKGNAME) $(BINDIR)

printable.man:
	groff -Tps -mandoc ./$(PKGNAME).1 >$(PKGNAME).ps
	groff -Tascii -mandoc ./$(PKGNAME).1 | tee $(PKGNAME).prn | sed 's/.//g' >$(PKGNAME).txt

install.man:
	install -m 644 -o $(USER) -g $(GROUP) $(PKGNAME).1 $(MANDIR)

# a tradition !
love:	
	@echo "Not War - Eh?"
# eof

